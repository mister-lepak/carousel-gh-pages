(this.webpackJsonp99carousel=this.webpackJsonp99carousel||[]).push([[0],{16:function(e,t,n){},20:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},21:function(e,t,n){e.exports=n(39)},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(3),r=n.n(i),c=n(2),o=n(18),l=n(7);var u=n(4),d=n(5),m=n(9),f=n(8),p=n(1),g=n(6),E=n(10),b=function(e){var t=e.listing,n=Object(a.useState)(0),i=Object(E.a)(n,2),r=i[0],c=i[1],o=Object(a.useState)(0),l=Object(E.a)(o,2),u=l[0],d=l[1],m=Object(a.useState)({transform:"translateX(0px)"}),f=Object(E.a)(m,2),p=f[0],g=f[1],b=function(e){var n=r+e;n>=0&&n<t.photos.length&&c(n)},I=function(e){d(e-2>0?-20*(e-2):0),g({transform:"translateX(".concat(u,"px)")})};return s.a.createElement(s.a.Fragment,null,s.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),b(-1),I(r)},className:"item1"},"<"),t.photos.map((function(e,t){var n="images";return t===r&&(n="images active"),s.a.createElement(s.a.Fragment,null,s.a.createElement("img",{src:e.url,className:"".concat(n," item2")}))})),s.a.createElement("div",{className:"item4"},s.a.createElement("ul",{className:"imageButtons",style:p},t.photos.map((function(e,t){var n="buttons";return t===r&&(n="buttons active"),s.a.createElement("li",null,s.a.createElement("button",{className:n,onClick:function(){b(t-r),I(t)}}))})))),s.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),b(1),I(r)},className:"item3"},">"))},I=(n(16),function(e){var t=e.listing,n=e.onClick,a=e.cssId;return s.a.createElement("p",{onClick:function(){n(t.id)},id:a},s.a.createElement("div",{className:"photo-wrapper"},s.a.createElement(b,{listing:t})),s.a.createElement("div",{className:"metaData"},s.a.createElement("p",{className:"category"},"".concat(t.sub_category_formatted.toUpperCase()," FOR ").concat(t.listing_type.toUpperCase())),s.a.createElement("h4",{className:"price"},t.attributes.price_formatted),s.a.createElement("p",{className:"details"},t.address_line_1),s.a.createElement("p",{className:"details"},"".concat(t.attributes.bedrooms_formatted," ").concat(t.attributes.bathrooms_formatted," ").concat(t.attributes.area_size_formatted))))}),h=n(14),O=n.n(h);function _(e){return{listings:e,type:"UPDATE_LISTINGS"}}function y(e){O.a.get("https://www.99.co/api/v1/web/search/listings?query_limit=radius&query_type=city&page_size=20&zoom=11&listing_type=sale&query_coords=1.3039947,103.8298507&page_num=1&radius_max=1000&map_bounds=1.5827095153768858,103.49449749970108,1.1090706240313446,104.12483807587296").then((function(t){var n=t.body.data.sections[0].listings;e(_(n))}),(function(t){e({type:"FETCH_LISTINGS_ERROR"})}))}function R(e){O.a.get("https://www.99.co/api/v1/web/search/listings?query_limit=radius&query_type=city&page_size=20&zoom=11&listing_type=sale&query_coords=1.3039947,103.8298507&page_num=1&radius_max=1000&map_bounds=1.5827095153768858,103.49449749970108,1.1090706240313446,104.12483807587296").then((function(t){var n=t.body.data.sections[0].listings;e({type:"TRIGGER_RENDER"}),e(_(n)),e({type:"INCREMENT"})}),(function(t){e({type:"FETCH_LISTINGS_ERROR"})}))}var v=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this)).state={startIndex:e.startIndex,endIndex:e.endIndex,listings:e.listings,isTest:[],firstRender:"undefined"===typeof e.firstRender||e.firstRender},a.updateListing=a.updateListing.bind(Object(g.a)(a)),a}return Object(d.a)(n,[{key:"componentWillUpdate",value:function(e){var t=this;console.log("nextProps is",e),e.startIndex!==this.props.startIndex&&this.setState((function(n){return Object(p.a)(Object(p.a)({},t.state),{},{listings:e.listings,firstRender:e.firstRender,startIndex:e.startIndex,endIndex:e.endIndex})}))}},{key:"updateListing",value:function(e){this.setState(Object(p.a)(Object(p.a)({},this.state),{},{listings:this.state.listings.map((function(t){var n=t.id===e;return n?Object(p.a)(Object(p.a)({},t),{},{isTest:n}):t}))}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.listings,a=t.startIndex,i=t.endIndex;t.firstRender;if(console.log(this.state.firstRender),this.state.firstRender&&this.props.fetchData(),!n)return null;console.log("LISTINGS",n);return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{id:"mainTitle"},"Listings with videos"),s.a.createElement("a",{href:"#",id:"leftArrow",onClick:this.props.decrement},"<"),n.map((function(t,n){if(n>=a&&n<=i)return s.a.createElement(I,{cssId:"listItem",key:n,listing:t,onClick:e.updateListing})})),s.a.createElement("a",{href:"#",id:"rightArrow",onClick:i>=n.length-3?e.props.fetchDataIncrement:e.props.increment},">"))}}]),n}(a.Component),j=Object(l.b)((function(e){return{listings:e.listings.listings,firstRender:e.listings.firstRender,startIndex:e.listings.startIndex,endIndex:e.listings.endIndex}}),(function(e){return{fetchData:function(){e(y)},fetchDataIncrement:function(){e(R)},increment:function(){e({type:"INCREMENT"})},decrement:function(){e({type:"DECREMENT"})},triggerRender:function(){e({type:"TRIGGER_RENDER"})}}}))(v),x=n(20),N=n.n(x),T=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"App-header"},s.a.createElement("img",{src:N.a,className:"App-logo",alt:"logo"}),s.a.createElement("h2",null,"Listing Carousel Test by 99.co")),s.a.createElement(j,null))}}]),n}(a.Component);var C=Object(c.c)({listings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n="undefined"===typeof e.startIndex?0:e.startIndex,a="undefined"===typeof e.endIndex?3:e.endIndex;switch(t.type){case"UPDATE_LISTINGS":var s="undefined"===typeof e.listings?[]:e.listings;return e.firstRender?Object(p.a)(Object(p.a)({},e),{},{listings:s.concat(t.listings),firstRender:!1,startIndex:n,endIndex:a}):Object(p.a)(Object(p.a)({},e),{},{listings:t.listings,firstRender:!1,startIndex:n,endIndex:a});case"DECREMENT":return n>0?Object(p.a)(Object(p.a)({},e),{},{startIndex:n-4,endIndex:a-4}):Object(p.a)({},e);case"INCREMENT":return Object(p.a)(Object(p.a)({},e),{},{startIndex:n+4,endIndex:a+4});case"TRIGGER_RENDER":return Object(p.a)(Object(p.a)({},e),{},{firstRender:!0});default:return e}}}),S=(n(38),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d),w=Object(c.e)(C,S(Object(c.a)((function(e){var t=e.dispatch,n=e.getState;return function(e){return function(a){return"function"===typeof a?a(t,n):console.log(a.type),e(a)}}}),o.a)));r.a.render(s.a.createElement(l.a,{store:w},s.a.createElement(T,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.66be3515.chunk.js.map